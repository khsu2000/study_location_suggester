{% extends "layout.html" %}
{% block content %}

<!-- Greeting/Summary Text -->
<div class="header-wrapper">
  <h1 class="text-center">Placeholder Title</h1>
  <p class="text-center">placeholder text here, ostensibly put the form here instead of in suggest.html</p>
</div>

<!-- Entry for keyword -->
<div class="container main_form">
  <form method="POST" action="">
    {{ form.hidden_tag() }}
    <div class="form-group">
      {{ form.query.label(class = "form-control-label") }}<br>
      {{ form.query(class = "form-control-lg", placeholder = "Enter a search keyword here") }}
    </div>
    <div class="form-group">
      {{ form.submit(class = "btn btn-primary btn-lg btn-block") }}
    </div>
  </form>
</div>

<!-- Area to put venue suggestion -->
{% if suggested %}
  <div class="container output">
    <h3>{{ suggested.get_name() }}</h3>                                                     <!-- Name of venue -->
    <p>Address: <a href={{ suggested.get_maps_link() }} target="_blank">
      {{ ", ".join(suggested.get_address()[:-1]) }}</a></p>                                 <!-- Address of venue -->
    <p>Description:</p>
    {% if suggested.get_description() %}
      <p>{{ suggested.get_description() }}</p>
    {% else %}
      <p>No description provided.</p> 
    {% endif %}
    {% if suggested.get_url() %}                                                            <!-- Linked website URL -->
      <p>Website: <a href={{ suggested.get_url() }} target="_blank">
        {{ suggested.get_url() }}</a></p>
    {% endif %}
    {% if suggested.get_rating() != -1 %}                                                   <!-- Foursquare rating -->
      <p>Foursquare rating: {{ suggested.get_rating() }}</p>
    {% endif %}
    <p>Read reviews from Foursquare
      <a href={{ suggested.get_canonical_url() }} target="_blank">here</a>.</p>             <!-- Foursquare canonical link -->
    <p>Contact Information:</p>
    {% if suggested.get_contacts() %}                                                       <!-- Contact information -->
      {% for contact in ["Facebook", "Twitter", "Instagram", "Phone Number"] %}
        {% if suggested.get_contacts().get(contact, None) %}
          <p>{{ contact }}: {{suggested.get_contacts()[contact] }}</p>
        {% endif %}
      {% endfor %}
    {% else %}
      <p>No contact information provided.</p>
    {% endif %}

    <!-- Next button to get next venue in list of suggestions -->
    {% if next_venue %}
      <form id="next_venue" method="POST" action="">
        {{ next_venue.hidden_tag() }}
          <fieldset class="form-group">
            <div class="form-group text-center">
              {{ next_venue.next_query(class = "btn btn-secondary btn-lg text-center") }}
            </div>
          </fieldset>
      </form>
    {% endif %}

    <!-- Prev button to get prev venue in list of suggestions -->
    {% if prev_venue %}
      <form id="prev_venue" method="POST" action="">
        {{ prev_venue.hidden_tag() }}
          <fieldset class="form-group">
            <div class="form-group text-center">
              {{ prev_venue.prev_query(class = "btn btn-secondary btn-lg text-center") }}
            </div>
          </fieldset>
      </form>
    {% endif %}
  </div>

<!-- Display text indicating no available venues -->
{% else %}
  <div class="container output">
    {% if error_status == 0 %}
      <p>Uh oh, it seems like the free-tier account I'm using for API requests has exceeded its daily limit.
        Try coming back in a couple hours. The request count refreshes every 12:00 AM UTC.
        Sorry about the inconvenience!</p>
    {% elif error_status == 1 %}
      <p>Hmm... We found no available options with that given keyword. Try a different search term and search again!</p>
    {% endif %}
  </div>
  
{% endif %}

<style>
.main_form{
  margin: 0 auto;
  width:70%
}

.output{
  margin: 0 auto;
  margin-top: 5%;
  width: 60%
}

.header-wrapper{
  margin: 0 auto;
  margin-top: 5%;
  margin-bottom: 5%;
  width: 50%
}

.form-control-lg{
  box-sizing:border-box;
  width:100%
}
</style>

{% endblock content %}
